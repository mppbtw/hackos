{"version":3,"file":"TilemapGeometry.mjs","sources":["../src/TilemapGeometry.ts"],"sourcesContent":["import { Buffer, BufferUsage, Geometry } from 'pixi.js';\n\n// For some reason, ESLint goes mad with indentation in this file ^&^\n/* eslint-disable no-mixed-spaces-and-tabs, indent */\n\nexport class TilemapGeometry extends Geometry\n{\n    static vertSize = 13;\n    static vertPerQuad = 4;\n    static stride = this.vertSize * 4;\n    lastTimeAccess = 0;\n\n    vertSize = TilemapGeometry.vertSize;\n    vertPerQuad = TilemapGeometry.vertPerQuad;\n    stride = TilemapGeometry.stride;\n\n    constructor(indexBuffer: Buffer)\n    {\n        const buf = new Buffer({\n            data: new Float32Array(2),\n            label: 'tilemap-buffer',\n            usage: BufferUsage.VERTEX | BufferUsage.COPY_DST,\n            shrinkToFit: false,\n        });\n\n        const stride = TilemapGeometry.stride;\n\n        // TODO: why location is like that in webgl? ascending?\n\n\t    super({\n            indexBuffer,\n            attributes: {\n                aVertexPosition: {\n                    buffer: buf,\n                    format: 'float32x2',\n                    stride,\n                    offset: 0,\n                    // location: 6,\n                },\n                aTextureCoord: {\n                    buffer: buf,\n                    format: 'float32x2',\n                    stride,\n                    offset: 2 * 4,\n                    // location: 4,\n                },\n                aFrame: {\n                    buffer: buf,\n                    format: 'float32x4',\n                    stride,\n                    offset: 4 * 4,\n                    // location: 3,\n                },\n                aAnim: {\n                    buffer: buf,\n                    format: 'float32x2',\n                    stride,\n                    offset: 8 * 4,\n                    // location: 1,\n                },\n                aTextureId: {\n                    buffer: buf,\n                    format: 'sint32',\n                    stride,\n                    offset: 10 * 4,\n                    // location: 5\n                },\n                aAnimDivisor: {\n                    buffer: buf,\n                    format: 'float32',\n                    stride,\n                    offset: 11 * 4,\n                    // location: 2\n                },\n                aAlpha: {\n                    buffer: buf,\n                    format: 'float32',\n                    stride,\n                    offset: 12 * 4,\n                    // location: 0\n                }\n            },\n        });\n\n        this.buf = buf;\n    }\n\n    buf: Buffer;\n}\n"],"names":["Buffer"],"mappings":";;;;;;;;AAKO,MAAM,gBAAA,GAAN,MAAM,gBAAA,SAAwB,QACrC,CAAA;AAAA,EAUI,YAAY,WACZ,EAAA;AACI,IAAM,MAAA,GAAA,GAAM,IAAIA,MAAO,CAAA;AAAA,MACnB,IAAA,EAAM,IAAI,YAAA,CAAa,CAAC,CAAA;AAAA,MACxB,KAAO,EAAA,gBAAA;AAAA,MACP,KAAA,EAAO,WAAY,CAAA,MAAA,GAAS,WAAY,CAAA,QAAA;AAAA,MACxC,WAAa,EAAA,KAAA;AAAA,KAChB,CAAA,CAAA;AAED,IAAA,MAAM,SAAS,gBAAgB,CAAA,MAAA,CAAA;AAIlC,IAAM,KAAA,CAAA;AAAA,MACC,WAAA;AAAA,MACA,UAAY,EAAA;AAAA,QACR,eAAiB,EAAA;AAAA,UACb,MAAQ,EAAA,GAAA;AAAA,UACR,MAAQ,EAAA,WAAA;AAAA,UACR,MAAA;AAAA,UACA,MAAQ,EAAA,CAAA;AAAA;AAAA,SAEZ;AAAA,QACA,aAAe,EAAA;AAAA,UACX,MAAQ,EAAA,GAAA;AAAA,UACR,MAAQ,EAAA,WAAA;AAAA,UACR,MAAA;AAAA,UACA,QAAQ,CAAI,GAAA,CAAA;AAAA;AAAA,SAEhB;AAAA,QACA,MAAQ,EAAA;AAAA,UACJ,MAAQ,EAAA,GAAA;AAAA,UACR,MAAQ,EAAA,WAAA;AAAA,UACR,MAAA;AAAA,UACA,QAAQ,CAAI,GAAA,CAAA;AAAA;AAAA,SAEhB;AAAA,QACA,KAAO,EAAA;AAAA,UACH,MAAQ,EAAA,GAAA;AAAA,UACR,MAAQ,EAAA,WAAA;AAAA,UACR,MAAA;AAAA,UACA,QAAQ,CAAI,GAAA,CAAA;AAAA;AAAA,SAEhB;AAAA,QACA,UAAY,EAAA;AAAA,UACR,MAAQ,EAAA,GAAA;AAAA,UACR,MAAQ,EAAA,QAAA;AAAA,UACR,MAAA;AAAA,UACA,QAAQ,EAAK,GAAA,CAAA;AAAA;AAAA,SAEjB;AAAA,QACA,YAAc,EAAA;AAAA,UACV,MAAQ,EAAA,GAAA;AAAA,UACR,MAAQ,EAAA,SAAA;AAAA,UACR,MAAA;AAAA,UACA,QAAQ,EAAK,GAAA,CAAA;AAAA;AAAA,SAEjB;AAAA,QACA,MAAQ,EAAA;AAAA,UACJ,MAAQ,EAAA,GAAA;AAAA,UACR,MAAQ,EAAA,SAAA;AAAA,UACR,MAAA;AAAA,UACA,QAAQ,EAAK,GAAA,CAAA;AAAA;AAAA,SAEjB;AAAA,OACJ;AAAA,KACH,CAAA,CAAA;AAxEL,IAAiB,aAAA,CAAA,IAAA,EAAA,gBAAA,EAAA,CAAA,CAAA,CAAA;AAEjB,IAAA,aAAA,CAAA,IAAA,EAAA,UAAA,EAAW,gBAAgB,CAAA,QAAA,CAAA,CAAA;AAC3B,IAAA,aAAA,CAAA,IAAA,EAAA,aAAA,EAAc,gBAAgB,CAAA,WAAA,CAAA,CAAA;AAC9B,IAAA,aAAA,CAAA,IAAA,EAAA,QAAA,EAAS,gBAAgB,CAAA,MAAA,CAAA,CAAA;AAyEzB,IAAA,aAAA,CAAA,IAAA,EAAA,KAAA,CAAA,CAAA;AAHI,IAAA,IAAA,CAAK,GAAM,GAAA,GAAA,CAAA;AAAA,GACf;AAGJ,CAAA,CAAA;AAjFI,aAAA,CAFS,kBAEF,UAAW,EAAA,EAAA,CAAA,CAAA;AAClB,aAAA,CAHS,kBAGF,aAAc,EAAA,CAAA,CAAA,CAAA;AACrB,aAJS,CAAA,gBAAA,EAIF,QAAS,EAAA,gBAAA,CAAK,QAAW,GAAA,CAAA,CAAA,CAAA;AAJ7B,IAAM,eAAN,GAAA;;;;"}